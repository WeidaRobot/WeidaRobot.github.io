webpackJsonp([4],{E4qV:function(t,e,o){(e=o("yGwj")(!1)).push([t.i,"\n.dialog-footer[data-v-d7126522] {\n  float: right;\n}\n\n",""]),t.exports=e},Sah4:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("//Fk"),a=o.n(r),n=o("woOf"),s=o.n(n),i=o("6Y32"),l=o("E4LH"),d={data:function(){return{robots:[],dialogType:"",dialogFormVisible:!1,numArray:[],robotForm:{_index:"",id:"",type:"lurking",address:"",port:"",mapId:"",userName:"",password:""},robotFormRules:{address:[{pattern:l.a.likeip,message:"格式错误"}],port:[{pattern:l.a.likePort,message:"端口错误"}]}}},mounted:function(){this.onrefresh()},methods:{onrefresh:function(){var t=this;this.numArray=[],this.robots=[];var e=this;Object(i.g)("robot").then(function(o){o.data.result?(o.data.data?o.data.data:[]).forEach(function(t,o){var r={};r.id=t.id,r.type=t.type,r._index=t._index,r.address=t.address,r.port=t.port,r.mapId=t.mapId,r.userName=t.userName,r.password=t.password,e.numArray.push(t._index),e.robots.push(r)}):t.$message.warning(o.data.comment)},function(t){})},add_dialog:function(){this.dialogType="新增AGV",this.dialogFormVisible=!0,this.robotForm._index=this.numArray.length?Math.max.apply(null,this.numArray)+1:0},edit_dialog:function(t,e){this.dialogType="修改AGV",this.dialogFormVisible=!0,this.robotForm=s()({},e)},ondelete:function(t,e){var o=this,r=s()({},e);r.weight=100,r.width=20,r.height=20,r.length=50,Object(i.e)(r).then(function(t){t.data.result?(o.onrefresh(),o.$message.success("删除成功")):o.$message.warning(t.data.comment)},function(t){o.$message.error("删除失败")})},onconfirm:function(){var t=this,e=this.robotForm;e.weight=100,e.width=20,e.height=20,e.length=50,e.__id=this.robotForm._index,new a.a(function(t,o){Object(i.g)("robot").then(function(o){var r=o.data.data?o.data.data:[];r.forEach(function(o,a){o._index===e._index&&(r.splice(a,1,e),t(r))})},function(t){o()})}).then(function(e){Object(i.m)("robot",e).then(function(e){e.data.result?(t.onrefresh(),t.$message.success("修改成功")):t.$message.warning(e.data.comment)},function(e){t.$message.error("修改失败")}).then(function(){t.oncancel()})},function(e){t.$message.error("数据加载失败,无法修改"),t.oncancel()})},onadd:function(){var t=this,e={};e.id=parseInt(this.robotForm.id),e.type=this.robotForm.type,e.address=this.robotForm.address,e.mapId=parseInt(this.robotForm.mapId),e.port=parseInt(this.robotForm.port),e.password=this.robotForm.password,e.userName=this.robotForm.userName,e.weight=100,e.width=20,e.height=20,e.length=50,e.__id=Math.max.apply(null,this.numArray)+1,e._index=this.robotForm._index,Object(i.b)(e).then(function(e){e.data.result?(t.onrefresh(),t.$message.success("添加成功")):t.$message.warning(e.data.comment)},function(e){t.$message.error("添加失败")}),this.oncancel()},oncancel:function(){this.dialogFormVisible=!1,this.$refs.robotForm.resetFields()},formatType:function(t,e){return{lurking:"潜伏",forklift:"叉车",shuttle:"穿梭车",roller:"滚筒",test:"测试"}[t.type]}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[o("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){t.preventDefault()}}},[o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:t.add_dialog}},[t._v("增加AGV")])],1)],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.robots,stripe:"","highlight-current-row":"",border:"",size:"small","header-cell-style":{"text-align":"center",background:"#F5F7FA"}}},[o("el-table-column",{attrs:{prop:"_index",label:"序号",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"id",label:"机器人ID",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"type",label:"机器类型",align:"center",formatter:t.formatType}}),t._v(" "),o("el-table-column",{attrs:{prop:"mapId",label:"地图ID",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"address",label:"IP地址",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"port",label:"端口号",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"password",label:"密码",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:t.$t("group.operations"),align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(o){return t.edit_dialog(e.$index,e.row)}}},[t._v("\n          "+t._s(t.$t("btn.mod"))+"\n        ")]),t._v(" "),o("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:function(o){return t.ondelete(e.$index,e.row)}}},[t._v("\n          "+t._s(t.$t("btn.del"))+"\n        ")])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{customClass:"dg-agv",title:t.dialogType,visible:t.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.oncancel}},[o("el-form",{ref:"robotForm",staticStyle:{"padding-right":"5%"},attrs:{model:t.robotForm,rules:t.robotFormRules,"label-width":"20%"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",[o("el-form-item",{attrs:{prop:"_index",label:"序号"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:t.robotForm._index,callback:function(e){t.$set(t.robotForm,"_index",t._n(e))},expression:"robotForm._index"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"id",label:"机器人ID"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.id,callback:function(e){t.$set(t.robotForm,"id",t._n(e))},expression:"robotForm.id"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"type",label:"机器类型"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"类型"},model:{value:t.robotForm.type,callback:function(e){t.$set(t.robotForm,"type",e)},expression:"robotForm.type"}},[o("el-option",{attrs:{label:"潜伏",value:"lurking"}}),t._v(" "),o("el-option",{attrs:{label:"叉车",value:"forklift"}}),t._v(" "),o("el-option",{attrs:{label:"穿梭车",value:"shuttle"}}),t._v(" "),o("el-option",{attrs:{label:"滚筒",value:"roller"}}),t._v(" "),o("el-option",{attrs:{label:"测试",value:"test"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"address",label:"IP地址"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.address,callback:function(e){t.$set(t.robotForm,"address",e)},expression:"robotForm.address"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"port",label:"端口号"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.port,callback:function(e){t.$set(t.robotForm,"port",t._n(e))},expression:"robotForm.port"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"mapId",label:"地图ID"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.mapId,callback:function(e){t.$set(t.robotForm,"mapId",t._n(e))},expression:"robotForm.mapId"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"userName",label:"用户名"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.userName,callback:function(e){t.$set(t.robotForm,"userName",e)},expression:"robotForm.userName"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"password",label:"密码"}},[o("el-input",{attrs:{min:0,max:100},model:{value:t.robotForm.password,callback:function(e){t.$set(t.robotForm,"password",e)},expression:"robotForm.password"}})],1),t._v(" "),o("div",{staticClass:"dialog-footer"},[o("el-button",{nativeOn:{click:function(e){return t.oncancel(e)}}},[t._v(t._s(t.$t("btn.Cancel")))]),t._v(" "),"新增AGV"===t.dialogType?o("el-button",{attrs:{type:"primary"},on:{click:t.onadd}},[t._v(t._s(t.$t("btn.add")))]):o("el-button",{attrs:{type:"primary"},on:{click:t.onconfirm}},[t._v(t._s(t.$t("user.mod")))])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(d,m,!1,function(t){o("t3fK"),o("pNzo")},"data-v-d7126522",null);e.default=c.exports},eSOp:function(t,e,o){(e=o("yGwj")(!1)).push([t.i,"\n.dg-agv {\n  /*box-shadow: 0 0 5px #409EFF inset;*/\n  width: 40%;\n  min-width: 350px;\n  border-top: 5px solid #409EFF;\n  -webkit-box-shadow: 0 0 300px rgba(76, 144, 255, 0.15) inset;\n          box-shadow: 0 0 300px rgba(76, 144, 255, 0.15) inset;\n  border-radius: 3px;\n}\n",""]),t.exports=e},pNzo:function(t,e,o){var r=o("E4qV");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o("rjj0")("010bc2cc",r,!0)},t3fK:function(t,e,o){var r=o("eSOp");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);o("rjj0")("df79ddc4",r,!0)}});